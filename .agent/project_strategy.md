# プロジェクト戦略とアーキテクチャの決定事項

## 1. 範囲（スコープ）の戦略
- **初期ターゲット**: **JR東日本** の路線のみに絞る。
  - *理由*: 複数の鉄道事業者のデータを統合する複雑さを避けるため。また、JR東日本は東京で最も網羅的でデータも充実しているため。
- **将来的な拡張**: パイプラインが安定した後、他の事業者（東京メトロ、都営地下鉄など）を追加する。

## 2. 経路探索（ナビゲーション）のアーキテクチャ
- **決定事項**: **独自のグラフ探索エンジン（乗り換え案内）は作らない。**
- **アプローチ**: 「駅Aから駅Bへの行き方」は、**外部API** または既存サービスを利用して解決する。
  - *理由*: 徒歩乗り換え、時刻表、階段の位置などを考慮した実用的な経路探索エンジンを自作するのは非常に工数が重いため（「車輪の再発明」になる）。
  - *候補となるAPI*:
    - Google Routes API
    - Navitime API
    - ODPT標準のナビゲーション機能（もしあれば）
  - *我々のフォーカス*: 「経路（駅と路線のリスト）」はあくまで *入力データ* として扱う。

## 3. アプリの提供価値（リスクエンジン）
- **独自の強み**: 「時間予測」ではなく**「信頼性（遅延リスク）の予測」**。
- **ワークフロー**:
  1. **ユーザー入力**: 出発駅、到着駅。
  2. **ステップ 1（外部依存）**: 経路候補を取得（例：ルート1は中央線、ルート2は総武線）。
  3. **ステップ 2（内部処理 - 独自ロジック）**:
     - 取得した経路の各区間について、独自のリスクデータベースを照会。
     - 過去のデータに基づき、各ルートの「遅延確率」を算出。
  4. **出力**: 「安全性・確実性」でソートまたは警告付きでルートを提示。
     - 「ルート1は早いが（20分）、**高リスク**（遅延確率 80%）。」
     - 「ルート2は遅いが（25分）、**低リスク**（遅延確率 5%）。」

## 4. 技術スタック
- **フロントエンド**: Vite + Vanilla JS（プレミアムなデザイン重視）。
- **バックエンド**: FastAPI (Python)。
- **データ**:
  - ODPT API: リアルタイムデータ & 静的マスターデータ。
  - SQLite（プロトタイプ） -> PostgreSQL（本番）: 履歴ログの保存用。
